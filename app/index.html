<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Study & To-Do Tracker</title>

  <!-- PWA manifest & theme -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0d6efd">

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- FullCalendar CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css"
    rel="stylesheet"
  />

  <style>
    body { padding: 1rem; }
    .completed { text-decoration: line-through; color: #888; }
    .quote { font-style: italic; margin-top: .5rem; }
    #tasks .btn { margin-left: .5rem; }
    #chartContainer { max-width: 400px; margin: 1rem auto; }
  </style>
</head>

<body>
  <div class="container">
    <h1 class="text-center mb-4">ðŸ“š Study & To-Do Tracker</h1>

    <!-- Controls -->
    <div class="d-flex justify-content-end mb-3">
      <button id="exportBtn" class="btn btn-outline-secondary me-2">Export Data</button>
      <button id="importBtn" class="btn btn-outline-secondary me-2">Import Data</button>
      <button id="resetAllBtn" class="btn btn-outline-danger">Reset All Data</button>
      <input type="file" id="importFile" accept="application/json" style="display:none" />
    </div>

    <!-- Daily Target -->
    <div class="card mb-4">
      <div class="card-header">ðŸŽ¯ Daily Target</div>
      <div class="card-body">
        <div class="input-group mb-2">
          <input type="text" id="dailyTargetInput" class="form-control" placeholder="Whatâ€™s your target today?">
          <button id="saveDailyBtn" class="btn btn-warning">Save</button>
        </div>
        <p id="dailyTargetDisplay" class="mb-0 text-primary"></p>
      </div>
    </div>

    <div class="row">
      <!-- To-Do List -->
      <div class="col-lg-6 mb-4">
        <div class="card">
          <div class="card-header">To-Do List</div>
          <div class="card-body">
            <div class="input-group mb-3">
              <input type="text" id="newTask" class="form-control" placeholder="Add a new taskâ€¦">
              <button id="addTaskBtn" class="btn btn-primary">Add</button>
            </div>
            <ul id="tasks" class="list-group"></ul>
            <div id="quote" class="quote text-success"></div>
          </div>
        </div>
      </div>

      <!-- Study Hours & Stats -->
      <div class="col-lg-6 mb-4">
        <div class="card mb-3">
          <div class="card-header">Record Study Hours</div>
          <div class="card-body">
            <div class="input-group">
              <input type="number" id="hoursInput" class="form-control"
                     placeholder="Hours studied today" min="0" max="24" step="0.1">
              <button id="saveHoursBtn" class="btn btn-success">Save</button>
            </div>
          </div>
        </div>

        <div class="card mb-3" id="averagesCard">
          <div class="card-header">Averages</div>
          <div class="card-body">
            <p>Weekly average: <strong id="weeklyAvg">0</strong> hrs/day</p>
            <p id="monthlyAvgRow">Monthly average: <strong id="monthlyAvg">0</strong> hrs/day</p>
          </div>
        </div>

        <div id="chartContainer" class="card" style="display:none">
          <div class="card-header">Monthly Completion Rate</div>
          <div class="card-body">
            <canvas id="pieChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Monthly Summary -->
    <div class="card mb-4">
      <div class="card-header">ðŸ“… Monthly Summary</div>
      <div class="card-body">
        <div class="input-group mb-3">
          <input type="month" id="monthPicker" class="form-control" />
          <button id="showSummaryBtn" class="btn btn-info">Show Summary</button>
        </div>
        <div id="monthlySummary"></div>
      </div>
    </div>

    <!-- Calendar -->
    <div class="card mb-4">
      <div class="card-header">Calendar View</div>
      <div class="card-body">
        <div id="calendar"></div>
      </div>
    </div>
  </div>

  <!-- Scripts: PWA + Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
